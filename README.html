<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>DIMS</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css" integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
        <link href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css" rel="stylesheet" type="text/css">
        <style>
.task-list-item { list-style-type: none; } .task-list-item-checkbox { margin-left: -20px; vertical-align: middle; }
</style>
        <style>
            body {
                font-family: 'YaHei Consolas Hybrid';
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        
        <script src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script>
    </head>
    <body class="vscode-light">
        <h1 id="dims">DIMS</h1>
<p><img src="https://img.shields.io/badge/sql%20server-2017+-blue.svg" alt="SQL Server">
<img src="https://img.shields.io/badge/java-1.8+-green.svg" alt="Java">
<img src="https://img.shields.io/badge/tomcat-9.0+-yellow.svg" alt="Tomcat"></p>
<p>🐟 数据库系统原理课程设计，DIMS，Drug Inventory Management System，基于 SSM 框架的医院药品库存管理系统。</p>
<h2 id="%e4%bb%bb%e5%8a%a1%e8%bf%9b%e5%ba%a6">任务进度</h2>
<ul class="contains-task-list">
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E6%9C%AC%E7%BB%84%E6%88%90%E5%91%98%E4%BB%BB%E5%8A%A1%E5%88%86%E5%B7%A5">0. 本组成员任务分工</a></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1">1. 数据库设计</a>
<ul class="contains-task-list">
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90">1.1 需求分析</a>
<ul class="contains-task-list">
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E4%B8%9A%E5%8A%A1%E7%94%A8%E4%BE%8B%E5%9B%BE">1.1.1 业务用例图</a></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8">1.1.2 数据字典</a></li>
</ul>
</li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E6%A6%82%E5%BF%B5%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1">1.2 概念结构设计</a>
<ul class="contains-task-list">
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#E-R-%E5%9B%BE">1.2.1 E-R 图</a></li>
</ul>
</li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E9%80%BB%E8%BE%91%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1">1.3 逻辑结构设计</a>
<ul class="contains-task-list">
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#E-R-%E5%9B%BE%E5%90%91%E5%85%B3%E7%B3%BB%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2">1.3.1 E-R 图向关系模型的转换</a></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B%E7%9A%84%E4%BC%98%E5%8C%96">1.3.2 数据模型的优化</a></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E8%AE%BE%E8%AE%A1%E7%94%A8%E6%88%B7%E5%AD%90%E6%A8%A1%E5%BC%8F">1.3.3 设计用户子模式</a></li>
</ul>
</li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E7%89%A9%E7%90%86%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1">1.4 物理结构设计</a>
<ul class="contains-task-list">
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E5%85%B3%E7%B3%BB%E6%A8%A1%E5%BC%8F%E5%AD%98%E5%8F%96%E6%96%B9%E6%B3%95%E9%80%89%E6%8B%A9">1.4.1 关系模式存取方法选择</a></li>
</ul>
</li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E6%96%BD">1.5 数据库实施</a>
<ul class="contains-task-list">
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E5%BB%BA%E7%AB%8B%E6%95%B0%E6%8D%AE%E5%BA%93">1.5.1 建立数据库</a></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E5%BB%BA%E7%AB%8B%E5%9F%BA%E6%9C%AC%E8%A1%A8">1.5.2 建立基本表</a></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E5%BB%BA%E7%AB%8B%E8%A7%86%E5%9B%BE">1.5.3 建立视图</a></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E5%BB%BA%E7%AB%8B%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B">1.5.4 建立存储过程</a></li>
</ul>
</li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%90%E8%A1%8C%E5%92%8C%E7%BB%B4%E6%8A%A4">1.6 数据库运行和维护</a></li>
</ul>
</li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1">2. 应用系统设计</a>
<ul class="contains-task-list">
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E6%8A%80%E6%9C%AF%E9%80%89%E5%9E%8B">2.0 技术选型</a></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E8%AF%A6%E7%BB%86%E8%AE%BE%E8%AE%A1">2.1 详细设计</a>
<ul class="contains-task-list">
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E9%A1%B5%E9%9D%A2%E6%B5%81%E7%A8%8B%E5%9B%BE">2.1.1 页面流程图</a></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E6%97%B6%E5%BA%8F%E5%9B%BE">2.1.2 时序图</a></li>
</ul>
</li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87">2.2 环境准备</a>
<ul class="contains-task-list">
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E9%85%8D%E7%BD%AE-Java-%E7%8E%AF%E5%A2%83">2.2.1 配置 Java 环境</a></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E5%AE%89%E8%A3%85-Eclipse-IDE-for-Enterprise-Java-Developers">2.2.2 安装 Eclipse IDE for Enterprise Java Developers</a></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E9%85%8D%E7%BD%AE-Tomcat-%E7%8E%AF%E5%A2%83">2.2.3 配置 Tomcat 环境</a></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E5%9C%A8-Eclipse-%E4%B8%AD%E9%85%8D%E7%BD%AE-Tomcat-Server">2.2.4 在 Eclipse 中配置 Tomcat Server</a></li>
</ul>
</li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84-Dynamic-Web-%E9%A1%B9%E7%9B%AE">2.3 创建一个新的 Dynamic Web 项目</a></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E9%9B%86%E6%88%90-Spring-%E5%92%8C-SpingMVC">2.4 集成 Spring 和 SpingMVC</a>
<ul class="contains-task-list">
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E5%AF%BC%E5%85%A5-Spring-%E7%9A%84-jar-%E5%8C%85">2.4.1 导入 Spring 的 jar 包</a></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E5%AF%BC%E5%85%A5-SpringMVC-%E7%9A%84-jar-%E5%8C%85">2.4.2 导入 SpringMVC 的 jar 包</a></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E5%AF%BC%E5%85%A5-Apache-Commons-%E7%9A%84-jar-%E5%8C%85">2.4.3 导入 Apache Commons 的 jar 包</a></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E5%AF%BC%E5%85%A5%E5%85%B6%E5%AE%83%E5%9F%BA%E7%A1%80-jar-%E5%8C%85">2.4.4 导入其它基础 jar 包</a></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E9%85%8D%E7%BD%AE-Spring">2.4.5 配置 Spring</a></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E9%85%8D%E7%BD%AE-SpringMVC">2.4.6 配置 SpringMVC</a></li>
</ul>
</li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E9%85%8D%E7%BD%AE-web.xml">2.5 配置 web.xml</a></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E9%9B%86%E6%88%90-Spring-%E5%92%8C-MyBatis">2.6 集成 Spring 和 MyBatis</a>
<ul class="contains-task-list">
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E5%AF%BC%E5%85%A5-MyBatis-%E7%9A%84-jar-%E5%8C%85">2.6.1 导入 MyBatis 的 jar 包</a></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E9%85%8D%E7%BD%AE-MyBatis">2.6.2 配置 MyBatis</a></li>
</ul>
</li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E9%85%8D%E7%BD%AE-log4j">2.7 配置 log4j</a></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E9%9B%86%E6%88%90%E5%9F%BA%E4%BA%8E-Bootstrap-%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6%E7%9A%84-ACE-%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E9%A1%B5%E9%9D%A2%E6%A8%A1%E6%9D%BF">2.8 集成基于 Bootstrap 前端框架的 ACE 管理系统页面模板</a></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E5%AF%BC%E5%85%A5-Apache-Taglibs-%E7%9A%84-jar-%E5%8C%85">2.9 导入 Apache Taglibs 的 jar 包</a></li>
</ul>
</li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E6%B5%8B%E8%AF%95%E4%B8%8E%E9%AA%8C%E6%94%B6">3. 测试与验收</a>
<ul class="contains-task-list">
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E7%95%8C%E9%9D%A2%E6%B5%8B%E8%AF%95">3.1 界面测试</a></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E5%8A%9F%E8%83%BD%E6%B5%8B%E8%AF%95">3.2 功能测试</a></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95">3.3 性能测试</a></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E9%9C%80%E6%B1%82%E6%B5%8B%E8%AF%95">3.4 需求测试</a></li>
</ul>
</li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98">4. 遇到的问题</a></li>
<li class="task-list-item"><input class="task-list-item-checkbox" checked="" disabled="" type="checkbox"> <a href="#%E6%88%90%E6%9E%9C%E6%88%AA%E5%9B%BE">5. 成果截图</a></li>
</ul>
<h2 id="%e6%9c%ac%e7%bb%84%e6%88%90%e5%91%98%e4%bb%bb%e5%8a%a1%e5%88%86%e5%b7%a5">本组成员任务分工</h2>
<ul>
<li>需求分析：全员</li>
<li>概念结构设计：全员</li>
<li>逻辑结构设计：全员</li>
<li>物理结构设计：全员</li>
<li>数据库实施：全员</li>
<li>数据库运行和维护：全员</li>
<li>应用系统设计：<a href="https://github.com/tys1998">tys1998</a></li>
<li>测试与验收：<a href="https://github.com/RID0517">RID0517</a>、<a href="https://github.com/Chingki">Chingki</a>、<a href="https://github.com/ice-che">ice-che</a></li>
<li>编写文档：<a href="https://github.com/RID0517">RID0517</a>、<a href="https://github.com/ice-che">ice-che</a></li>
<li>编写答辩 PPT：<a href="https://github.com/unique717171">unique717171</a></li>
</ul>
<h2 id="%e6%95%b0%e6%8d%ae%e5%ba%93%e8%ae%be%e8%ae%a1">数据库设计</h2>
<p>在数据库设计过程中，需求分析和概念结构设计可以独立于任何数据库管理系统进行，逻辑结构设计和物理结构设计与选用的数据库管理系统密切相关。</p>
<h3 id="%e9%9c%80%e6%b1%82%e5%88%86%e6%9e%90">需求分析</h3>
<p>需求分析必须准确了解与分析用户需求 (包括数据与处理)。</p>
<p><strong>设计描述</strong>：数字字典、全系统中数据项、数据结构、数据流、数据存储的描述。</p>
<p><strong>任务</strong>：通过详细调查现实世界要处理的对象 (组织、部门、企业等)，充分了解原系统 (手工系统或计算机系统) 的工作概况，明确用户的各种需求，然后在此基础上确定新系统的功能。新系统必须充分考虑今后可能的扩充和改变，不能仅仅按当前应用需求来设计数据库。调查的重点是 <strong>“数据”</strong> 和 <strong>“处理”</strong>，通过调查、收集与分析，获得用户对数据库的如下要求：</p>
<ul>
<li><strong>信息要求</strong>：指用户需要从数据库中获得信息的内容与性质。由信息要求可以导出数据要求，即在数据库中需要存储哪些数据。</li>
<li><strong>处理要求</strong>：指用户要完成的数据处理功能，对处理性能的要求。</li>
<li><strong>安全性与完整性要求</strong></li>
</ul>
<h4 id="%e4%b8%9a%e5%8a%a1%e7%94%a8%e4%be%8b%e5%9b%be">业务用例图</h4>
<p><img src="file:///f:\eclipse-workspace\jee\DIMS\Doc\%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90_%E4%B8%9A%E5%8A%A1%E7%94%A8%E4%BE%8B%E5%9B%BE.png" alt="需求分析_业务用例图"></p>
<p>参考：</p>
<ul>
<li><a href="https://www.cnblogs.com/gd-luojialin/p/10356704.html">UML 之用例图</a></li>
</ul>
<h4 id="%e6%95%b0%e6%8d%ae%e5%ad%97%e5%85%b8">数据字典</h4>
<p>数据字典是进行详细的数据收集和数据分析所获得的主要成果。它是关于数据库中数据的描述，即元数据，而不是数据本身。数据字典是在需求分析阶段建立，在数据库设计过程中不断修改、充实、完善的。它在数据库设计中占有很重要的地位。数据字典通常包括数据项、数据结构、数据流、数据存储和处理过程几部分。其中数据项是数据的最小组成单位，若干个数据项可以组成一个数据结构。数据字典通过对数据项和数据结构的定义来描述数据流、数据存储的逻辑内容。</p>
<ul>
<li>
<p><strong>数据项</strong>：数据项是不可再分的数据单位。对数据项的描述通常包括以下内容：</p>
<pre><code><code><div>数据项描述 = { 数据项名, 数据项含义说明, 别名, 数据类型, 长度, 取值范围, 取值含义, 与其他数据项的逻辑关系, 数据项之间的联系 }
</div></code></code></pre>
<table>
<thead>
<tr>
<th>数据项名</th>
<th>数据项含义说明</th>
<th>数据类型</th>
<th>长度</th>
<th>取值范围</th>
<th>取值含义</th>
<th>与其他数据项的逻辑关系</th>
<th>数据项之间的联系</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ano</td>
<td>库存管理员编号</td>
<td>VARCHAR</td>
<td>20</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Aname</td>
<td>库存管理员姓名</td>
<td>VARCHAR</td>
<td>20</td>
<td></td>
<td></td>
<td></td>
<td>Ano→Aname</td>
</tr>
<tr>
<td>Asex</td>
<td>库存管理员性别</td>
<td>BIT</td>
<td>1</td>
<td>{ 0, 1 }</td>
<td>0 代表女，1 代表男</td>
<td></td>
<td>Ano→Asex</td>
</tr>
<tr>
<td>Aage</td>
<td>库存管理员年龄</td>
<td>SMALLINT</td>
<td>2</td>
<td>[0, 32767]</td>
<td></td>
<td></td>
<td>Ano→Aage</td>
</tr>
<tr>
<td>Apwd</td>
<td>库存管理员登陆密码</td>
<td>VARCHAR</td>
<td>20</td>
<td></td>
<td></td>
<td></td>
<td>Ano→Apwd</td>
</tr>
<tr>
<td>Dno</td>
<td>医生编号</td>
<td>VARCHAR</td>
<td>20</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Dname</td>
<td>医生姓名</td>
<td>VARCHAR</td>
<td>20</td>
<td></td>
<td></td>
<td></td>
<td>Dno→Dname</td>
</tr>
<tr>
<td>Dsex</td>
<td>医生性别</td>
<td>BIT</td>
<td>1</td>
<td>{ 0, 1 }</td>
<td>0 代表女，1 代表男</td>
<td></td>
<td>Dno→Dsex</td>
</tr>
<tr>
<td>Dage</td>
<td>医生年龄</td>
<td>SMALLINT</td>
<td>2</td>
<td>[0, 32767]</td>
<td></td>
<td></td>
<td>Dno→Dage</td>
</tr>
<tr>
<td>Dpwd</td>
<td>医生登陆密码</td>
<td>VARCHAR</td>
<td>20</td>
<td></td>
<td></td>
<td></td>
<td>Dno→Dpwd</td>
</tr>
<tr>
<td>Nno</td>
<td>发药处护士编号</td>
<td>VARCHAR</td>
<td>20</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Nname</td>
<td>发药处护士姓名</td>
<td>VARCHAR</td>
<td>20</td>
<td></td>
<td></td>
<td></td>
<td>Nno→Nname</td>
</tr>
<tr>
<td>Nsex</td>
<td>发药处护士性别</td>
<td>BIT</td>
<td>1</td>
<td>{ 0, 1 }</td>
<td>0 代表女，1 代表男</td>
<td></td>
<td>Nno→Nsex</td>
</tr>
<tr>
<td>Nage</td>
<td>发药处护士年龄</td>
<td>SMALLINT</td>
<td>2</td>
<td>[0, 32767]</td>
<td></td>
<td></td>
<td>Nno→Nage</td>
</tr>
<tr>
<td>Npwd</td>
<td>发药处护士登陆密码</td>
<td>VARCHAR</td>
<td>20</td>
<td></td>
<td></td>
<td></td>
<td>Nno→Npwd</td>
</tr>
<tr>
<td>Sno</td>
<td>供应商编号</td>
<td>VARCHAR</td>
<td>20</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Sname</td>
<td>供应商名称</td>
<td>VARCHAR</td>
<td>20</td>
<td></td>
<td></td>
<td></td>
<td>Sno→Sname</td>
</tr>
<tr>
<td>Saddr</td>
<td>供应商地址</td>
<td>VARCHAR</td>
<td>60</td>
<td></td>
<td></td>
<td></td>
<td>Sno→Saddr</td>
</tr>
<tr>
<td>Sphone</td>
<td>供应商电话</td>
<td>VARCHAR</td>
<td>20</td>
<td></td>
<td></td>
<td></td>
<td>Sno→Sphone</td>
</tr>
<tr>
<td>PDno</td>
<td>药品编号</td>
<td>VARCHAR</td>
<td>20</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>PDname</td>
<td>药品名称</td>
<td>VARCHAR</td>
<td>20</td>
<td></td>
<td></td>
<td></td>
<td>PDno→PDname</td>
</tr>
<tr>
<td>PDlife</td>
<td>药品保质期</td>
<td>SMALLINT</td>
<td>2</td>
<td>[0, 32767]</td>
<td></td>
<td></td>
<td>PDno→PDlife</td>
</tr>
<tr>
<td>PDbatch</td>
<td>药品批次</td>
<td>DATE</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>PDnum</td>
<td>药品数量</td>
<td>SMALLINT</td>
<td>2</td>
<td>[0, 32767]</td>
<td></td>
<td></td>
<td>(PDno, PDbatch)→PDnum</td>
</tr>
<tr>
<td>SAno</td>
<td>药品入库库存管理员编号</td>
<td>VARCHAR</td>
<td>20</td>
<td></td>
<td></td>
<td>SAno ∈ List<code>&lt;Ano</code>&gt;</td>
<td>(PDno, PDbatch)→SAno</td>
</tr>
<tr>
<td>Stime</td>
<td>药品入库时间</td>
<td>DATETIME</td>
<td></td>
<td></td>
<td></td>
<td>Stime ≥ PDbatch</td>
<td>(PDno, PDbatch)→Stime</td>
</tr>
<tr>
<td>DAno</td>
<td>药品销毁库存管理员编号</td>
<td>VARCHAR</td>
<td>20</td>
<td></td>
<td></td>
<td>DAno ∈ List<code>&lt;Ano</code>&gt;</td>
<td>(PDno, PDbatch)→DAno</td>
</tr>
<tr>
<td>Dtime</td>
<td>药品销毁时间</td>
<td>DATETIME</td>
<td></td>
<td></td>
<td></td>
<td>Dtime ≥ Stime</td>
<td>(PDno, PDbatch)→Dtime</td>
</tr>
<tr>
<td>Pno</td>
<td>处方编号</td>
<td>INT</td>
<td></td>
<td>[1, 2147483647]</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Pid</td>
<td>病人身份证号</td>
<td>VARCHAR</td>
<td>20</td>
<td></td>
<td></td>
<td></td>
<td>Pno→Pid</td>
</tr>
<tr>
<td>Ptime</td>
<td>处方开出时间</td>
<td>DATETIME</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>Pno→Ptime</td>
</tr>
<tr>
<td>Htime</td>
<td>处方处理时间</td>
<td>DATETIME</td>
<td></td>
<td></td>
<td></td>
<td>Htime ≥ Ptime</td>
<td>Pno→Htime</td>
</tr>
<tr>
<td>Pstate</td>
<td>处方状态</td>
<td>BIT</td>
<td>1</td>
<td>{ 0, 1 }</td>
<td>0 代表未处理，1 代表已处理</td>
<td></td>
<td>Pno→Pstate</td>
</tr>
</tbody>
</table>
</li>
<li>
<p><strong>数据结构</strong>：</p>
<pre><code><code><div>数据结构描述 = { 数据结构名, 含义说明, 组成:{数据项或数据结构} }
</div></code></code></pre>
<table>
<thead>
<tr>
<th>数据结构名</th>
<th>含义说明</th>
<th>组成:{数据项或数据结构}</th>
</tr>
</thead>
<tbody>
<tr>
<td>Admin</td>
<td>库存管理员</td>
<td>{ Ano, Aname, Asex, Aage, Apwd }</td>
</tr>
<tr>
<td>Doctor</td>
<td>医生</td>
<td>{ Dno, Dname, Dsex, Dage, Dpwd }</td>
</tr>
<tr>
<td>Nurse</td>
<td>发药处护士</td>
<td>{ Nno, Nname, Nsex, Nage, Npwd }</td>
</tr>
<tr>
<td>Supplier</td>
<td>供应商</td>
<td>{ Sno, Sname, Saddr, Sphone }</td>
</tr>
<tr>
<td>Drug</td>
<td>药品</td>
<td>{ PDno, PDname, PDlife, PDnum }</td>
</tr>
<tr>
<td>InventoryDrug</td>
<td>库存药品</td>
<td>{ PDno, PDname, PDlife, PDbatch, PDnum, Sno, SAno, Stime }</td>
</tr>
<tr>
<td>DestroyedDrug</td>
<td>已销毁药品</td>
<td>{ PDno, PDname, PDlife, PDbatch, PDnum, Sno, SAno, Stime, DAno, Dtime }</td>
</tr>
<tr>
<td>Prescription</td>
<td>处方</td>
<td>{ Pno, Pid, Dno, Ptime, Nno, Htime, Pstate, List<code>Drug</code> }</td>
</tr>
</tbody>
</table>
</li>
<li>
<p><strong>数据流</strong>：</p>
<pre><code><code><div>数据流描述 = { 数据流名, 说明, 数据流来源, 数据流去向, 组成:{数据结构}, 平均流量, 高峰期流量 }
</div></code></code></pre>
<table>
<thead>
<tr>
<th>数据流名</th>
<th>说明</th>
<th>数据流来源</th>
<th>数据流去向</th>
<th>组成:{数据结构}</th>
<th>平均流量</th>
<th>高峰期流量</th>
</tr>
</thead>
<tbody></tbody>
</table>
</li>
<li>
<p><strong>数据存储</strong>：</p>
<pre><code><code><div>数据存储描述 = { 数据存储名, 说明, 编号, 输入的数据流, 输出的数据流, 组成:{数据结构}, 数据量, 存取频度, 存取方式 }
</div></code></code></pre>
<table>
<thead>
<tr>
<th>数据存储名</th>
<th>说明</th>
<th>编号</th>
<th>输入的数据流</th>
<th>输出的数据流</th>
<th>组成:{数据结构}</th>
<th>数据量</th>
<th>存取频度</th>
<th>存取方式</th>
</tr>
</thead>
<tbody></tbody>
</table>
</li>
<li>
<p><strong>处理过程</strong>：</p>
<pre><code><code><div>处理过程描述 = { 处理过程名, 说明, 输入:{数据流}, 输出:{数据流}, 处理:{简要说明} }
</div></code></code></pre>
<table>
<thead>
<tr>
<th>处理过程名</th>
<th>说明</th>
<th>输入:{数据流}</th>
<th>输出:{数据流}</th>
<th>处理:{简要说明}</th>
</tr>
</thead>
<tbody></tbody>
</table>
</li>
</ul>
<p>参考：</p>
<ul>
<li><a href="http://ishare.iask.sina.com.cn/f/1H3ghDKS2Oo4.html">汽车修配管理信息系统课程设计报告</a></li>
</ul>
<h3 id="%e6%a6%82%e5%bf%b5%e7%bb%93%e6%9e%84%e8%ae%be%e8%ae%a1">概念结构设计</h3>
<p>概念结构设计通过对用户需求进行综合、归纳与抽象，形成一个独立于具体数据库管理系统的概念模型。</p>
<p><strong>设计描述</strong>：概念模型 (E-R 图)、数据字典。</p>
<p><strong>任务</strong>：概念结构设计的第一步就是对需求分析阶段收集到的数据进行分类、组织，确定实体、实体的属性、实体之间的联系类型，形成 E-R 图。</p>
<h4 id="e-r-%e5%9b%be">E-R 图</h4>
<p><img src="file:///f:\eclipse-workspace\jee\DIMS\Doc\%E6%A6%82%E5%BF%B5%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1_ER%E5%9B%BE.png" alt="概念结构设计_ER图"></p>
<h3 id="%e9%80%bb%e8%be%91%e7%bb%93%e6%9e%84%e8%ae%be%e8%ae%a1">逻辑结构设计</h3>
<p>逻辑结构设计是将概念结构转换为某个数据库管理系统所支持的数据模型，并对其进行优化。</p>
<p><strong>设计描述</strong>：某种数据模型 (关系 / 非关系)。</p>
<p><strong>任务</strong>：把概念结构设计阶段设计好的基本 E-R 图转换为与选用数据库管理系统产品所支持的数据模型相符合的逻辑结构。将概念模型转换为全局逻辑模型后，还应该根据局部应用需求，结合具体关系数据库管理系统的特点设计用户的外模式。</p>
<h4 id="e-r-%e5%9b%be%e5%90%91%e5%85%b3%e7%b3%bb%e6%a8%a1%e5%9e%8b%e7%9a%84%e8%bd%ac%e6%8d%a2">E-R 图向关系模型的转换</h4>
<ol>
<li>一个 1:1 联系可以转换为一个独立的关系模式，也可以与任意一端的关系模式合并。</li>
<li>一个 1:n 联系可以转换为一个独立的关系模式，也可以与 n 端对应的关系模式合并。</li>
<li>一个 m:n 联系转换为一个关系模式。</li>
<li>三个或三个以上实体间的一个多元联系可以转换为一个关系模式。</li>
<li>具有相同码的关系模式可以合并。</li>
</ol>
<p><img src="file:///f:\eclipse-workspace\jee\DIMS\Doc\%E9%80%BB%E8%BE%91%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1_%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B.png" alt="逻辑结构设计_关系数据模型"></p>
<h4 id="%e6%95%b0%e6%8d%ae%e6%a8%a1%e5%9e%8b%e7%9a%84%e4%bc%98%e5%8c%96">数据模型的优化</h4>
<p>关系数据模型的优化通常以规范化理论为指导，方法为：</p>
<ol>
<li>确定数据依赖。按需求分析阶段所得到的语义，分别写出每个关系模式内部各属性之间的数据依赖以及不同关系模式属性之间的数据依赖。</li>
<li>对于各个关系模式之间的数据依赖进行极小化处理，消除冗余的联系。</li>
<li>按照数据依赖的理论对关系模式逐一进行分析，考察是否存在部分函数依赖、传递函数依赖、多值依赖等，确定各关系模式分别属于第几范式。</li>
<li>根据需求分析阶段得到的处理要求分析对于这样的应用环境这些模式是否合适，确定是否要对某些模式进行合并或分解。必须注意的是，<strong>并不是规范化程度越高的关系就越优</strong>。对于一个具体应用来说，到底规范化到什么程度需要权衡响应时间和潜在问题两者的利弊决定。</li>
<li>对关系模式进行必要分解，提高数据操作效率和存储空间利用率。常用的两种分解方法是水平分解和垂直分解。
<ul>
<li>水平分解：把 (基本) 关系的元组分为若干子集合，定义每个子集为一个子关系，以提高系统的效率。</li>
<li>垂直分解：把关系模式 R 的属性分解为若干子集合，形成若干子关系模式。垂直分解的原则是，将经常在一起使用的属性从 R 中分解出来形成一个子关系模式。</li>
</ul>
</li>
</ol>
<p><img src="file:///f:\eclipse-workspace\jee\DIMS\Doc\%E9%80%BB%E8%BE%91%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1_%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B_%E4%BC%98%E5%8C%96.png" alt="逻辑结构设计_关系数据模型_优化"></p>
<h4 id="%e8%ae%be%e8%ae%a1%e7%94%a8%e6%88%b7%e5%ad%90%e6%a8%a1%e5%bc%8f">设计用户子模式</h4>
<p>定义数据库全局模式主要是从系统的时间效率、空间效率、易维护等角度出发。</p>
<p>定义用户外模式时可以注重考虑用户的习惯与方便，具体包括以下几方面：</p>
<ol>
<li>使用更符合用户习惯的别名。在合并各分 E-R 图时曾做过消除命名冲突的工作，以使数据库系统中同一关系和属性具有唯一的名字。这在设计数据库整体结构时是非常必要的。用视图机制可以在设计用户视图时重新定义某些属性名，使其与用户习惯一致，以方便使用。</li>
<li>可以对不同级别的用户定义不同的视图，以保证系统的安全性。</li>
<li>简化用户对系统的使用。如果某些局部应用中经常要使用某些很复杂的查询，为了方便用户，可以将这些复杂查询定义为视图，用户每次只对定义好的视图进行查询，大大简化了用户的使用。</li>
</ol>
<p>一共设计了 5 个用户子模式 (视图)——<code>DrugView</code>、<code>InventoryDrugView</code>、<code>DestroyedDrugView</code>、<code>AllPDbatchView</code>、<code>DrugDoctorView</code>，这 5 个视图都是为了简化数据库用户 (主要是应用程序员) 对系统的使用。</p>
<p>其中 <code>InventoryDrugView</code> 和 <code>DestroyedDrugView</code> 是对先前做了优化分解的两个关系模式的重新连接；<code>DrugView</code> 是对各药品的所有批次进行汇总统计，主要是为了计算各药品的库存总量；<code>AllPDbatchView</code> 是对所有药品批次 (包括现存的批次和已销毁的批次) 的合并汇总查询。</p>
<p>其中比较复杂的是 <code>DrugDoctorView</code>，对于应用系统的三类人员来说，库存管理员和发药处护士的视图所看到的药品库存量是一样的，都是真实的药品库存量，只有医生的视图不一样，医生所看到的药品库存量应该是真实的药品库存量减去已开出但未处理的处方当中所包含的药品库存量。</p>
<p><img src="file:///f:\eclipse-workspace\jee\DIMS\Doc\%E9%80%BB%E8%BE%91%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1_%E7%94%A8%E6%88%B7%E5%AD%90%E6%A8%A1%E5%BC%8F_InventoryDrugView.png" alt="逻辑结构设计_用户子模式_InventoryDrugView"></p>
<p><img src="file:///f:\eclipse-workspace\jee\DIMS\Doc\%E9%80%BB%E8%BE%91%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1_%E7%94%A8%E6%88%B7%E5%AD%90%E6%A8%A1%E5%BC%8F_DestroyedDrugView.png" alt="逻辑结构设计_用户子模式_DestroyedDrugView"></p>
<p><img src="file:///f:\eclipse-workspace\jee\DIMS\Doc\%E9%80%BB%E8%BE%91%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1_%E7%94%A8%E6%88%B7%E5%AD%90%E6%A8%A1%E5%BC%8F_DrugView.png" alt="逻辑结构设计_用户子模式_DrugView"></p>
<h3 id="%e7%89%a9%e7%90%86%e7%bb%93%e6%9e%84%e8%ae%be%e8%ae%a1">物理结构设计</h3>
<p>物理结构设计是为逻辑数据模型选取一个最适合应用环境的物理结构 (包括存储结构和存取方法)。</p>
<p><strong>设计描述</strong>：存储安排、存取方法选择、存取路径建立。</p>
<p><strong>内容</strong>：主要包括为关系模式选择存取方法，以及设计关系、索引等数据库文件的物理存储结构。</p>
<h4 id="%e5%85%b3%e7%b3%bb%e6%a8%a1%e5%bc%8f%e5%ad%98%e5%8f%96%e6%96%b9%e6%b3%95%e9%80%89%e6%8b%a9">关系模式存取方法选择</h4>
<p>数据库系统是多用户共享的系统，对同一个关系要建立多条存取路径才能满足多用户的多种应用要求。物理结构设计的任务之一是根据关系数据库管理系统支持的存取方法确定选择哪些存取方法。</p>
<p>存取方法是快速存取数据库中数据的技术。所谓选择索引存取方法，实际上就是根据应用要求确定对关系的哪些属性列建立索引、哪些属性列建立组合索引、哪些索引要设计为唯一索引等。</p>
<p>关系上定义的索引数并不是越多越好，系统为维护索引要付出代价，查找索引也要付出代价。例如，若一个关系的更新频率很高，这个关系上定义的索引数不能太多。因为更新一个关系时，必须对这个关系上有关的索引做相应的修改。</p>
<p>数据库管理系统一般提供多种存取方法。常用的存取方法为 <strong>索引方法</strong> 和 <strong>聚簇 (clustering) 方法</strong>。B+ 树索引和 hash 索引是数据库中经典的存取方法，使用最普遍。</p>
<ul>
<li>
<p>B+ 树索引存取方法的选择 (也是一般索引存取方法的选择)：</p>
<ul>
<li>如果一个 (或一组) 属性经常在查询条件中出现，则考虑在这个 (或这组) 属性上建立索引 (或组合索引)。</li>
<li>如果一个属性经常作为最大值和最小值等聚集函数的参数，则考虑在这个属性上建立索引。</li>
<li>如果一个 (或一组) 属性经常在连接操作的连接条件中出现，则考虑在这个 (或这组) 属性上建立索引。</li>
</ul>
</li>
<li>
<p>hash 索引存取方法的选择：如果一个关系的属性主要出现在等值连接条件中或主要出现在等值比较选择条件中，而且满足下列两个条件之一，则此关系可以选择 hash 索引存取方法。</p>
<ul>
<li>一个关系的大小可预知，而且不变。</li>
<li>关系的大小动态改变，但数据库管理系统提供了动态 hash 存取方法。</li>
</ul>
</li>
<li>
<p>聚簇存取方法的选择：</p>
<p>为了提高某个属性 (或属性组) 的查询速度，把这个或这些属性上具有相同值的元组集中存放在连续的物理块中称为聚簇。该属性 (或属性组) 称为 <strong>聚簇码 (cluster key)</strong>。聚簇功能可以大大提高按聚簇码进行查询的效率。</p>
<p>聚簇功能不但适用于单个关系，也适用于经常进行连接操作的多个关系。即把多个连接关系的元组按连接属性值聚集存放。这就相当于把多个关系按“预连接”的形式存放，从而大大提高连接操作的效率。</p>
<p>一个数据库可以建立多个聚簇，一个关系只能加入一个聚簇。选择聚簇存取方法，即确定需要建立多少个聚簇，每个聚簇中包括哪些关系。</p>
<ol>
<li>
<p>首先设计候选聚簇，一般来说：</p>
<ul>
<li>对经常在一起进行连接操作的关系可以建立聚簇。</li>
<li>如果一个关系的一组属性经常出现在相等比较条件中，则该单个关系可建立聚簇。</li>
<li>如果一个关系的一个 (或一组) 属性上的值重复率很高，则此单个关系可建立聚簇。即对应每个聚簇码值的平均元组数不能太少，太少则聚簇的效果不明显。</li>
</ul>
</li>
<li>
<p>然后检查候选聚簇中的关系，取消其中不必要的关系。</p>
<ul>
<li>从聚簇中删除经常进行全表扫描的关系。</li>
<li>从聚簇中删除更新操作远多于连接操作的关系。</li>
<li>不同的聚簇中可能包含相同的关系，一个关系可以在某一个聚簇中，但不能同时加入多个聚簇。要从这多个聚簇方案中 (包括不建立聚簇) 中选择一个较优的，即在这个聚簇上运行各种事务的总代价最小。</li>
</ul>
</li>
</ol>
</li>
</ul>
<p>综合考量之后，我们认为不建立索引和聚簇的话运行各种事务的总代价反而最小，所以我们不建立索引和聚簇。</p>
<h3 id="%e6%95%b0%e6%8d%ae%e5%ba%93%e5%ae%9e%e6%96%bd">数据库实施</h3>
<p>在数据库实施阶段，设计人员运用数据库管理系统提供的数据库语言及其宿主语言，根据逻辑设计和物理设计的结果建立数据库，编写与调试应用程序，组织数据入库，并进行试运行。</p>
<p><strong>设计描述</strong>：创建数据库模式、装入数据、数据库试运行。</p>
<ul>
<li><a href="./preDB.sql">preDB.sql</a></li>
</ul>
<h4 id="%e5%bb%ba%e7%ab%8b%e6%95%b0%e6%8d%ae%e5%ba%93">建立数据库：</h4>
<pre><code class="language-sql"><div><span class="hljs-keyword">USE</span> <span class="hljs-keyword">master</span>;

IF EXISTS (<span class="hljs-keyword">SELECT</span> *
            <span class="hljs-keyword">FROM</span> sysdatabases
            <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">name</span> = <span class="hljs-string">'DIMS'</span>)
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">DATABASE</span> DIMS;
<span class="hljs-keyword">END</span>;

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">DATABASE</span> DIMS;

IF NOT EXISTS (<span class="hljs-keyword">SELECT</span> *
                <span class="hljs-keyword">FROM</span> syslogins
                <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">name</span> = <span class="hljs-string">'dba'</span>)
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">CREATE</span> LOGIN dba <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">PASSWORD</span> = <span class="hljs-string">'abcd1234@'</span>, DEFAULT_DATABASE = DIMS;
<span class="hljs-keyword">END</span>

<span class="hljs-keyword">GO</span>

<span class="hljs-keyword">USE</span> DIMS;

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> dba <span class="hljs-keyword">FOR</span> LOGIN dba <span class="hljs-keyword">WITH</span> DEFAULT_SCHEMA = dbo;

EXEC sp_addrolemember 'db_owner', 'dba';
</div></code></pre>
<h4 id="%e5%bb%ba%e7%ab%8b%e5%9f%ba%e6%9c%ac%e8%a1%a8">建立基本表：</h4>
<pre><code class="language-sql"><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">Admin</span>( <span class="hljs-comment">-- 库存管理员</span>
    Ano <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) PRIMARY <span class="hljs-keyword">KEY</span>, <span class="hljs-comment">-- 编号</span>
    Aname <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>, <span class="hljs-comment">-- 姓名</span>
    Asex <span class="hljs-built_in">BIT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span>, <span class="hljs-comment">-- 性别 (1 为男，0 为女)</span>
    Aage <span class="hljs-built_in">SMALLINT</span> <span class="hljs-keyword">CHECK</span> (Aage &gt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>, <span class="hljs-comment">-- 年龄</span>
    Apwd <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'00000000'</span> <span class="hljs-comment">-- 登陆密码</span>
);
</div></code></pre>
<pre><code class="language-sql"><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> Doctor( <span class="hljs-comment">-- 医生</span>
    Dno <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) PRIMARY <span class="hljs-keyword">KEY</span>, <span class="hljs-comment">-- 编号</span>
    Dname <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>, <span class="hljs-comment">-- 姓名</span>
    Dsex <span class="hljs-built_in">BIT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span>, <span class="hljs-comment">-- 性别 (1 为男，0 为女)</span>
    Dage <span class="hljs-built_in">SMALLINT</span> <span class="hljs-keyword">CHECK</span> (Dage &gt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>, <span class="hljs-comment">-- 年龄</span>
    Dpwd <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'00000000'</span> <span class="hljs-comment">-- 登陆密码</span>
);
</div></code></pre>
<pre><code class="language-sql"><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> Nurse( <span class="hljs-comment">-- 发药处护士</span>
    Nno <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) PRIMARY <span class="hljs-keyword">KEY</span>, <span class="hljs-comment">-- 编号</span>
    Nname <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>, <span class="hljs-comment">-- 姓名</span>
    Nsex <span class="hljs-built_in">BIT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span>, <span class="hljs-comment">-- 性别 (1 为男，0 为女)</span>
    Nage <span class="hljs-built_in">SMALLINT</span> <span class="hljs-keyword">CHECK</span> (Nage &gt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>, <span class="hljs-comment">-- 年龄</span>
    Npwd <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'00000000'</span> <span class="hljs-comment">-- 登陆密码</span>
);
</div></code></pre>
<pre><code class="language-sql"><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> Supplier( <span class="hljs-comment">-- 供应商</span>
    Sno <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) PRIMARY <span class="hljs-keyword">KEY</span>, <span class="hljs-comment">-- 编号</span>
    Sname <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">60</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>, <span class="hljs-comment">-- 名称</span>
    Saddr <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">60</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>, <span class="hljs-comment">-- 地址</span>
    Sphone <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-comment">-- 电话</span>
);
</div></code></pre>
<pre><code class="language-sql"><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> Drug( <span class="hljs-comment">-- 药品</span>
    PDno <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) PRIMARY <span class="hljs-keyword">KEY</span>, <span class="hljs-comment">-- 编号</span>
    PDname <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>, <span class="hljs-comment">-- 名称</span>
    PDlife <span class="hljs-built_in">SMALLINT</span> <span class="hljs-keyword">CHECK</span> (PDlife &gt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-comment">-- 保质期 (天数)</span>
);
</div></code></pre>
<pre><code class="language-sql"><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> InventoryDrug( <span class="hljs-comment">-- 库存药品</span>
    PDno <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>), <span class="hljs-comment">-- 编号</span>
    PDbatch <span class="hljs-built_in">DATE</span>, <span class="hljs-comment">-- 批次</span>
    PDnum <span class="hljs-built_in">SMALLINT</span> <span class="hljs-keyword">CHECK</span> (PDnum &gt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>, <span class="hljs-comment">-- 数量</span>
    Sno <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>, <span class="hljs-comment">-- 供应商编号</span>
    SAno <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>, <span class="hljs-comment">-- 入库库存管理员编号</span>
    Stime DATETIME <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">GETDATE</span>(), <span class="hljs-comment">-- 入库时间</span>
    PRIMARY <span class="hljs-keyword">KEY</span>(PDno, PDbatch),
    <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span> (PDno) <span class="hljs-keyword">REFERENCES</span> Drug(PDno),
    <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span> (Sno) <span class="hljs-keyword">REFERENCES</span> Supplier(Sno),
    <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span> (SAno) <span class="hljs-keyword">REFERENCES</span> <span class="hljs-keyword">Admin</span>(Ano),
    <span class="hljs-keyword">CHECK</span> (<span class="hljs-keyword">DATEDIFF</span>(<span class="hljs-keyword">DAY</span>, PDbatch, Stime) &gt;= <span class="hljs-number">0</span>)
);
</div></code></pre>
<pre><code class="language-sql"><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> DestroyedDrug( <span class="hljs-comment">-- 已销毁药品</span>
    PDno <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>), <span class="hljs-comment">-- 编号</span>
    PDbatch <span class="hljs-built_in">DATE</span>, <span class="hljs-comment">-- 批次</span>
    PDnum <span class="hljs-built_in">SMALLINT</span> <span class="hljs-keyword">CHECK</span> (PDnum &gt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>, <span class="hljs-comment">-- 数量</span>
    Sno <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>, <span class="hljs-comment">-- 供应商编号</span>
    SAno <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>, <span class="hljs-comment">-- 入库库存管理员编号</span>
    Stime DATETIME <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>, <span class="hljs-comment">-- 入库时间</span>
    DAno <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>, <span class="hljs-comment">-- 销毁库存管理员编号</span>
    Dtime DATETIME <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">GETDATE</span>(), <span class="hljs-comment">-- 销毁时间</span>
    PRIMARY <span class="hljs-keyword">KEY</span>(PDno, PDbatch),
    <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span> (PDno) <span class="hljs-keyword">REFERENCES</span> Drug(PDno),
    <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span> (Sno) <span class="hljs-keyword">REFERENCES</span> Supplier(Sno),
    <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span> (SAno) <span class="hljs-keyword">REFERENCES</span> <span class="hljs-keyword">Admin</span>(Ano),
    <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEy</span> (DAno) <span class="hljs-keyword">REFERENCES</span> <span class="hljs-keyword">Admin</span>(Ano),
    <span class="hljs-keyword">CHECK</span> (<span class="hljs-keyword">DATEDIFF</span>(<span class="hljs-keyword">DAY</span>, PDbatch, Stime) &gt;= <span class="hljs-number">0</span> <span class="hljs-keyword">AND</span> <span class="hljs-keyword">DATEDIFF</span>(<span class="hljs-keyword">DAY</span>, Stime, Dtime) &gt;= <span class="hljs-number">0</span>)
);
</div></code></pre>
<pre><code class="language-sql"><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> Prescription( <span class="hljs-comment">-- 处方</span>
    Pno <span class="hljs-built_in">INT</span> PRIMARY <span class="hljs-keyword">KEY</span> <span class="hljs-keyword">IDENTITY</span> (<span class="hljs-number">1</span>, <span class="hljs-number">1</span>), <span class="hljs-comment">-- 编号</span>
    Pid <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>, <span class="hljs-comment">-- 病人身份证号码</span>
    Dno <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>, <span class="hljs-comment">-- 开出医生编号</span>
    Ptime DATETIME <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>, <span class="hljs-comment">-- 开出时间</span>
    Nno <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>), <span class="hljs-comment">-- 处理护士编号</span>
    Htime DATETIME, <span class="hljs-comment">-- 处理时间</span>
    Pstate <span class="hljs-built_in">BIT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>, <span class="hljs-comment">-- 状态 (1 为已处理，0 为未处理)</span>
    <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span> (Dno) <span class="hljs-keyword">REFERENCES</span> Doctor(Dno),
    <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span> (Nno) <span class="hljs-keyword">REFERENCES</span> Nurse(Nno),
    <span class="hljs-keyword">CHECK</span> (<span class="hljs-keyword">DATEDIFF</span>(<span class="hljs-keyword">DAY</span>, Ptime, Htime) &gt;= <span class="hljs-number">0</span>)
);
</div></code></pre>
<pre><code class="language-sql"><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> PID( <span class="hljs-comment">-- 处方包含的药品</span>
    Pno <span class="hljs-built_in">INT</span>, <span class="hljs-comment">-- 处方编号</span>
    PDno <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>), <span class="hljs-comment">-- 药品编号</span>
    PDnum <span class="hljs-built_in">SMALLINT</span> <span class="hljs-keyword">CHECK</span> (PDnum &gt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>, <span class="hljs-comment">-- 药品数量</span>
    PRIMARY <span class="hljs-keyword">KEY</span> (Pno, PDno),
    <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span> (Pno) <span class="hljs-keyword">REFERENCES</span> Prescription(Pno) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">CASCADE</span>,
    <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span> (PDno) <span class="hljs-keyword">REFERENCES</span> Drug(PDno)
);
</div></code></pre>
<h4 id="%e5%bb%ba%e7%ab%8b%e8%a7%86%e5%9b%be">建立视图：</h4>
<pre><code class="language-sql"><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> DrugView
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> d.PDno, d.PDname, d.PDlife, <span class="hljs-keyword">COALESCE</span>(<span class="hljs-keyword">SUM</span>(i.PDnum), <span class="hljs-number">0</span>) <span class="hljs-keyword">AS</span> PDnum
<span class="hljs-keyword">FROM</span> Drug d <span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">OUTER</span> <span class="hljs-keyword">JOIN</span> InventoryDrug i <span class="hljs-keyword">ON</span> d.PDno = i.PDno
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> d.PDno, d.PDname, d.PDlife;
</div></code></pre>
<pre><code class="language-sql"><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> InventoryDrugView
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> d.PDno, d.PDname, d.PDlife, i.PDbatch, i.PDnum, i.Sno, i.SAno, i.Stime,
        (d.PDlife - <span class="hljs-keyword">DATEDIFF</span>(<span class="hljs-keyword">DAY</span>, i.PDbatch, <span class="hljs-keyword">GETDATE</span>())) <span class="hljs-keyword">AS</span> Rdays
<span class="hljs-keyword">FROM</span> Drug d, InventoryDrug i
<span class="hljs-keyword">WHERE</span> d.PDno = i.PDno;
</div></code></pre>
<pre><code class="language-sql"><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> DestroyedDrugView
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> d.PDno, d.PDname, d.PDlife, dd.PDbatch, dd.PDnum, dd.Sno, dd.SAno, dd.Stime, dd.DAno, dd.Dtime
<span class="hljs-keyword">FROM</span> Drug d, DestroyedDrug dd
<span class="hljs-keyword">WHERE</span> d.PDno = dd.PDno;
</div></code></pre>
<pre><code class="language-sql"><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> AllPDbatchView
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> PDno, PDname, PDlife, PDbatch, PDnum, Sno, SAno, Stime, <span class="hljs-literal">null</span> <span class="hljs-keyword">AS</span> DAno, <span class="hljs-literal">null</span> <span class="hljs-keyword">AS</span> Dtime, Rdays
<span class="hljs-keyword">FROM</span> InventoryDrugView
<span class="hljs-keyword">UNION</span>
<span class="hljs-keyword">SELECT</span> PDno, PDname, PDlife, PDbatch, PDnum, Sno, SAno, Stime, DAno, Dtime, <span class="hljs-literal">null</span> <span class="hljs-keyword">AS</span> Rdays
<span class="hljs-keyword">FROM</span> DestroyedDrugView;
</div></code></pre>
<pre><code class="language-sql"><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> DrugDoctorView
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> d.PDno, d.PDname, d.PDlife, (d.PDnum - (<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">COALESCE</span>(<span class="hljs-keyword">SUM</span>(PID.PDnum), <span class="hljs-number">0</span>)
                                                <span class="hljs-keyword">FROM</span> Prescription p, PID
                                                <span class="hljs-keyword">WHERE</span> p.Pno = PID.Pno <span class="hljs-keyword">AND</span> p.Pstate = <span class="hljs-number">0</span>
                                                        <span class="hljs-keyword">AND</span> PID.PDno = d.PDno)) <span class="hljs-keyword">AS</span> PDnum
<span class="hljs-keyword">FROM</span> DrugView d;
</div></code></pre>
<h4 id="%e5%bb%ba%e7%ab%8b%e5%ad%98%e5%82%a8%e8%bf%87%e7%a8%8b">建立存储过程：</h4>
<pre><code class="language-sql"><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> DestroyInventoryDrug @PDno <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>), @PDbatch <span class="hljs-built_in">DATE</span>,
                                        @DAno <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>), @Dtime DATETIME, @returnValue <span class="hljs-built_in">SMALLINT</span> <span class="hljs-keyword">OUTPUT</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SET</span> XACT_ABORT <span class="hljs-keyword">ON</span>
<span class="hljs-keyword">BEGIN</span> TRAN
<span class="hljs-keyword">DECLARE</span> @PDnum <span class="hljs-built_in">SMALLINT</span>;
<span class="hljs-keyword">DECLARE</span> @Sno <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>);
<span class="hljs-keyword">DECLARE</span> @SAno <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>);
<span class="hljs-keyword">DECLARE</span> @Stime DATETIME;
<span class="hljs-keyword">SET</span> @returnValue = <span class="hljs-number">0</span>;
<span class="hljs-keyword">SELECT</span> @PDnum = PDnum, @Sno = Sno, @SAno = SAno, @Stime = Stime
<span class="hljs-keyword">FROM</span> InventoryDrug
<span class="hljs-keyword">WHERE</span> PDno = @PDno <span class="hljs-keyword">AND</span> PDbatch = @PDbatch;
<span class="hljs-keyword">SET</span> @returnValue = @returnValue + @@<span class="hljs-keyword">error</span>;
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> DestroyedDrug(PDno, PDbatch, PDnum, Sno, SAno, Stime, DAno, Dtime)
    <span class="hljs-keyword">VALUES</span>(@PDno, @PDbatch, @PDnum, @Sno, @SAno, @Stime, @DAno, @Dtime);
<span class="hljs-keyword">SET</span> @returnValue = @returnValue + @@<span class="hljs-keyword">error</span>;
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> InventoryDrug
<span class="hljs-keyword">WHERE</span> PDno = @PDno <span class="hljs-keyword">AND</span> PDbatch = @PDbatch;
<span class="hljs-keyword">SET</span> @returnValue = @returnValue + @@<span class="hljs-keyword">error</span>;
<span class="hljs-keyword">COMMIT</span> TRAN
</div></code></pre>
<pre><code class="language-sql"><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> HandleRx @Pno <span class="hljs-built_in">INT</span>, @Nno <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>), @Htime DATETIME, @returnValue <span class="hljs-built_in">SMALLINT</span> <span class="hljs-keyword">OUTPUT</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SET</span> XACT_ABORT <span class="hljs-keyword">ON</span>
<span class="hljs-keyword">BEGIN</span> TRAN
<span class="hljs-keyword">DECLARE</span> @RxDrugPDno <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">20</span>);
<span class="hljs-keyword">DECLARE</span> @RxDrugPDnum <span class="hljs-built_in">SMALLINT</span>;
<span class="hljs-keyword">DECLARE</span> @BatchPDbatch <span class="hljs-built_in">DATE</span>;
<span class="hljs-keyword">DECLARE</span> @BatchPDnum <span class="hljs-built_in">SMALLINT</span>;
<span class="hljs-keyword">SET</span> @returnValue = <span class="hljs-number">0</span>;
<span class="hljs-keyword">DECLARE</span> RxDrugs <span class="hljs-keyword">CURSOR</span> <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">SELECT</span> PDno, PDnum
                            <span class="hljs-keyword">FROM</span> PID
                            <span class="hljs-keyword">WHERE</span> Pno = @Pno;
OPEN RxDrugs;
FETCH NEXT FROM RxDrugs INTO @RxDrugPDno, @RxDrugPDnum;
WHILE @@FETCH_STATUS = 0
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">DECLARE</span> Batches <span class="hljs-keyword">CURSOR</span> <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">SELECT</span> PDbatch, PDnum
                                <span class="hljs-keyword">FROM</span> InventoryDrug
                                <span class="hljs-keyword">WHERE</span> PDno = @RxDrugPDno
                                <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> PDbatch <span class="hljs-keyword">ASC</span>;
    OPEN Batches;
    FETCH NEXT FROM Batches INTO @BatchPDbatch, @BatchPDnum;
    WHILE @@FETCH_STATUS = 0 AND @RxDrugPDnum &gt; 0
    <span class="hljs-keyword">BEGIN</span>
        <span class="hljs-keyword">IF</span> @BatchPDnum &gt;= @RxDrugPDnum
        <span class="hljs-keyword">BEGIN</span>
            <span class="hljs-keyword">UPDATE</span> InventoryDrug
            <span class="hljs-keyword">SET</span> PDnum = (PDnum - @RxDrugPDnum)
            <span class="hljs-keyword">WHERE</span> PDno = @RxDrugPDno <span class="hljs-keyword">AND</span> PDbatch = @BatchPDbatch;
            <span class="hljs-keyword">SET</span> @returnValue = @returnValue + @@<span class="hljs-keyword">error</span>;
            <span class="hljs-keyword">SET</span> @RxDrugPDnum = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">END</span>
        <span class="hljs-keyword">ELSE</span>
        <span class="hljs-keyword">BEGIN</span>
            <span class="hljs-keyword">SET</span> @RxDrugPDnum = @RxDrugPDnum - @BatchPDnum;
            <span class="hljs-keyword">UPDATE</span> InventoryDrug
            <span class="hljs-keyword">SET</span> PDnum = <span class="hljs-number">0</span>
            <span class="hljs-keyword">WHERE</span> PDno = @RxDrugPDno <span class="hljs-keyword">AND</span> PDbatch = @BatchPDbatch;
            <span class="hljs-keyword">SET</span> @returnValue = @returnValue + @@<span class="hljs-keyword">error</span>;
        <span class="hljs-keyword">END</span>
        <span class="hljs-keyword">FETCH</span> <span class="hljs-keyword">NEXT</span> <span class="hljs-keyword">FROM</span> Batches <span class="hljs-keyword">INTO</span> @BatchPDbatch, @BatchPDnum;
    <span class="hljs-keyword">END</span>
    <span class="hljs-keyword">CLOSE</span> Batches
    <span class="hljs-keyword">DEALLOCATE</span> Batches
    <span class="hljs-keyword">FETCH</span> <span class="hljs-keyword">NEXT</span> <span class="hljs-keyword">FROM</span> RxDrugs <span class="hljs-keyword">INTO</span> @RxDrugPDno, @RxDrugPDnum;
<span class="hljs-keyword">END</span>
<span class="hljs-keyword">CLOSE</span> RxDrugs
<span class="hljs-keyword">DEALLOCATE</span> RxDrugs
<span class="hljs-keyword">SET</span> @returnValue = @returnValue + @@<span class="hljs-keyword">error</span>;
<span class="hljs-keyword">UPDATE</span> Prescription
<span class="hljs-keyword">SET</span> Nno = @Nno, Htime = @Htime, Pstate = <span class="hljs-number">1</span>
<span class="hljs-keyword">WHERE</span> Pno = @Pno;
<span class="hljs-keyword">SET</span> @returnValue = @returnValue + @@<span class="hljs-keyword">error</span>;
<span class="hljs-keyword">COMMIT</span> TRAN
</div></code></pre>
<h3 id="%e6%95%b0%e6%8d%ae%e5%ba%93%e8%bf%90%e8%a1%8c%e5%92%8c%e7%bb%b4%e6%8a%a4">数据库运行和维护</h3>
<p><strong>设计描述</strong>：性能监测、转储 / 恢复、数据库重组和重构。</p>
<h2 id="%e5%ba%94%e7%94%a8%e7%b3%bb%e7%bb%9f%e8%ae%be%e8%ae%a1">应用系统设计</h2>
<p>参考：</p>
<ul>
<li><a href="https://blog.csdn.net/wang404838334/article/details/78449164">B/S、C/S 模式介绍</a></li>
<li><a href="https://blog.csdn.net/jack_xia_2018/article/details/83540199">SSM 框架介绍</a></li>
</ul>
<h3 id="%e6%8a%80%e6%9c%af%e9%80%89%e5%9e%8b">技术选型</h3>
<ul>
<li>网络架构：B/S 模式 (易开发、易维护、易扩展)</li>
<li>前端管理页面模板：基于 Bootstrap 前端框架的 ACE 管理系统页面模板</li>
<li>核心框架：使用 Spring Boot 来构建整个项目</li>
<li>视图框架：使用 Spring MVC 来构建视图层</li>
<li>持久化框架：使用 MyBatis 来做 ORM 关系映射 (容易掌握)</li>
<li>数据库连接池：DBCP 数据库连接池</li>
<li>WEB 容器：Tomcat</li>
<li>存储数据库：SQL Server 数据库 (最熟悉)</li>
<li>生产服务环境：Windows 10 (最熟悉)</li>
</ul>
<h3 id="%e8%af%a6%e7%bb%86%e8%ae%be%e8%ae%a1">详细设计</h3>
<p>不会画 😭。</p>
<h4 id="%e9%a1%b5%e9%9d%a2%e6%b5%81%e7%a8%8b%e5%9b%be">页面流程图</h4>
<p><img src="file:///f:\eclipse-workspace\jee\DIMS\Doc\%E8%AF%A6%E7%BB%86%E8%AE%BE%E8%AE%A1_%E9%A1%B5%E9%9D%A2%E6%B5%81%E7%A8%8B%E5%9B%BE_User.png" alt="详细设计_页面流程图_User"></p>
<p><img src="file:///f:\eclipse-workspace\jee\DIMS\Doc\%E8%AF%A6%E7%BB%86%E8%AE%BE%E8%AE%A1_%E9%A1%B5%E9%9D%A2%E6%B5%81%E7%A8%8B%E5%9B%BE_Admin.png" alt="详细设计_页面流程图_Admin"></p>
<p><img src="file:///f:\eclipse-workspace\jee\DIMS\Doc\%E8%AF%A6%E7%BB%86%E8%AE%BE%E8%AE%A1_%E9%A1%B5%E9%9D%A2%E6%B5%81%E7%A8%8B%E5%9B%BE_Doctor.png" alt="详细设计_页面流程图_Doctor"></p>
<p><img src="file:///f:\eclipse-workspace\jee\DIMS\Doc\%E8%AF%A6%E7%BB%86%E8%AE%BE%E8%AE%A1_%E9%A1%B5%E9%9D%A2%E6%B5%81%E7%A8%8B%E5%9B%BE_Nurse.png" alt="详细设计_页面流程图_Nurse"></p>
<p>参考：</p>
<ul>
<li><a href="http://www.chanpin100.com/article/105363">深入浅出为你解读四类「流程图」，附摩拜 / OFO 案例分析</a></li>
<li><a href="http://www.woshipm.com/pmd/27239.html">谈谈页面流程图 (附案例)</a></li>
</ul>
<h4 id="%e6%97%b6%e5%ba%8f%e5%9b%be">时序图</h4>
<p><img src="file:///f:\eclipse-workspace\jee\DIMS\Doc\%E8%AF%A6%E7%BB%86%E8%AE%BE%E8%AE%A1_%E6%97%B6%E5%BA%8F%E5%9B%BE_User.png" alt="详细设计_时序图_User"></p>
<p>参考：</p>
<ul>
<li><a href="https://www.cnblogs.com/gd-luojialin/p/10356740.html">UML 之时序图</a></li>
</ul>
<h3 id="%e7%8e%af%e5%a2%83%e5%87%86%e5%a4%87">环境准备</h3>
<h4 id="%e9%85%8d%e7%bd%ae-java-%e7%8e%af%e5%a2%83">配置 Java 环境</h4>
<ol>
<li>
<p>下载 JDK 安装包：</p>
<ul>
<li><a href="https://www.oracle.com/technetwork/java/javase/overview/index.html">Java SE 官网</a></li>
<li><a href="https://www.oracle.com/technetwork/java/javase/downloads/index.html">Java SE 官网下载页面</a></li>
</ul>
</li>
<li>
<p>配置环境变量：</p>
<table>
<thead>
<tr>
<th>变量</th>
<th>值</th>
</tr>
</thead>
<tbody>
<tr>
<td>JAVA_HOME</td>
<td>C:\Program Files\Java\jdk1.8.0_231</td>
</tr>
<tr>
<td>JRE_HOME</td>
<td>C:\Program Files\Java\jre1.8.0_231</td>
</tr>
<tr>
<td>Path</td>
<td>;%JAVA_HOME%\bin</td>
</tr>
</tbody>
</table>
</li>
</ol>
<h4 id="%e5%ae%89%e8%a3%85-eclipse-ide-for-enterprise-java-developers">安装 Eclipse IDE for Enterprise Java Developers</h4>
<ul>
<li><a href="https://www.eclipse.org/">Eclipse 官网</a></li>
<li><a href="https://www.eclipse.org/downloads/">Eclipse 官网 Installer 下载页面</a></li>
</ul>
<h4 id="%e9%85%8d%e7%bd%ae-tomcat-%e7%8e%af%e5%a2%83">配置 Tomcat 环境</h4>
<ol>
<li>
<p>从官网下载相应的 Tomcat Binary Distributions 安装包文件 <code>32-bit/64-bit Windows Service Installer</code>。</p>
<ul>
<li><a href="http://tomcat.apache.org/">Tomcat 官网</a></li>
<li><a href="https://tomcat.apache.org/download-90.cgi">Tomcat 9 官网下载页面</a></li>
</ul>
</li>
<li>
<p>双击运行下载的安装文件，按照提示一步一步安装并配置。</p>
</li>
<li>
<p>配置环境变量：</p>
<table>
<thead>
<tr>
<th>变量</th>
<th>值</th>
</tr>
</thead>
<tbody>
<tr>
<td>TOMCAT_HOME</td>
<td>C:\Program Files\Apache Software Foundation\Tomcat 9.0</td>
</tr>
<tr>
<td>CATALINA_HOME</td>
<td>C:\Program Files\Apache Software Foundation\Tomcat 9.0</td>
</tr>
<tr>
<td>Path</td>
<td>;%TOMCAT_HOME%\bin;%CATALINA_HOME%\lib</td>
</tr>
</tbody>
</table>
</li>
</ol>
<h4 id="%e5%9c%a8-eclipse-%e4%b8%ad%e9%85%8d%e7%bd%ae-tomcat-server">在 Eclipse 中配置 Tomcat Server</h4>
<p>参考：</p>
<ul>
<li><a href="https://www.cnblogs.com/greenteaone/p/7929571.html">安装 Eclipse，配置 Tomcat</a></li>
<li><a href="https://blog.csdn.net/weixin_41704733/article/details/79871950">Eclipse 环境下如何配置 Tomcat，并且把项目部署到 Tomcat 服务器上</a></li>
</ul>
<h3 id="%e5%88%9b%e5%bb%ba%e4%b8%80%e4%b8%aa%e6%96%b0%e7%9a%84-dynamic-web-%e9%a1%b9%e7%9b%ae">创建一个新的 Dynamic Web 项目</h3>
<p>新建一个名为 <code>DIMS</code> 的 <code>Dynamic Web Project</code>，<code>Target runtime</code> 选择上一步在 Eclipse 当中配置的 <code>Apache Tomcat v9.0</code>，<code>Dynamic web module version</code> 选择最新版本，<code>Configuration</code> 选择 <code>Default Configuration for Apache Tomcat v9.0</code>，其它选项不作更改，点击 <code>Next</code>。</p>
<p>将 <code>Default output folder</code> 的值改为 <code>WebContent\WEB-INF\classes</code>，点击 <code>Next</code>。</p>
<p>勾选 <code>Generate web.xml deployment descriptor</code>，点击 <code>Finish</code>。</p>
<p>测试项目是否可以发布成功，参考：</p>
<ul>
<li><a href="https://blog.csdn.net/weixin_41704733/article/details/79871950">Eclipse 环境下如何配置 Tomcat，并且把项目部署到 Tomcat 服务器上</a></li>
</ul>
<p>后续需要导入的 jar 包都复制到项目的 <code>WebContent\WEB-INF\lib</code> 目录当中来。</p>
<h3 id="%e9%9b%86%e6%88%90-spring-%e5%92%8c-spingmvc">集成 Spring 和 SpingMVC</h3>
<ul>
<li><a href="https://spring.io/">Spring 官网</a></li>
<li><a href="https://repo.spring.io/release/org/springframework/spring/">Spring 发行版的下载地址</a></li>
<li><a href="https://repo.spring.io/release/org/springframework/spring/5.2.1.RELEASE/">Spring 发行版 v5.2.1 的下载地址</a></li>
</ul>
<p>下载 <code>spring-5.2.1.RELEASE-dist.zip</code> 并解压。</p>
<h4 id="%e5%af%bc%e5%85%a5-spring-%e7%9a%84-jar-%e5%8c%85">导入 Spring 的 jar 包</h4>
<p>将 <code>spring-5.2.1.RELEASE-dist.zip</code> 解压路径的 <code>libs</code> 目录下的一部分 jar 包复制到项目的 <code>WebContent\WEB-INF\lib</code> 目录当中来，需要的 jar 包如下：</p>
<ul>
<li>spring-aop-5.2.1.RELEASE.jar</li>
<li>spring-aspects-5.2.1.RELEASE.jar</li>
<li>spring-beans-5.2.1.RELEASE.jar</li>
<li>spring-context-5.2.1.RELEASE.jar</li>
<li>spring-core-5.2.1.RELEASE.jar</li>
<li>spring-expression-5.2.1.RELEASE.jar</li>
<li>spring-jdbc-5.2.1.RELEASE.jar</li>
<li>spring-test-5.2.1.RELEASE.jar</li>
<li>spring-tx-5.2.1.RELEASE.jar</li>
<li>spring-web-5.2.1.RELEASE.jar</li>
</ul>
<h4 id="%e5%af%bc%e5%85%a5-springmvc-%e7%9a%84-jar-%e5%8c%85">导入 SpringMVC 的 jar 包</h4>
<p>将 <code>spring-5.2.1.RELEASE-dist.zip</code> 解压路径的 <code>libs</code> 目录下的一部分 jar 包复制到项目的 <code>WebContent\WEB-INF\lib</code> 目录当中来，需要的 jar 包如下：</p>
<ul>
<li>spring-webmvc-5.2.1.RELEASE.jar</li>
</ul>
<h4 id="%e5%af%bc%e5%85%a5-apache-commons-%e7%9a%84-jar-%e5%8c%85">导入 Apache Commons 的 jar 包</h4>
<ul>
<li><a href="https://commons.apache.org/index.html">Apache Commons 官网</a></li>
<li><a href="https://commons.apache.org/downloads/index.html">Apache Commons 官网 jar 包下载地址</a></li>
</ul>
<p>需要导入的 jar 包：</p>
<ul>
<li><a href="https://commons.apache.org/proper/commons-dbcp/download_dbcp.cgi">commons-dbcp2-2.7.0.jar</a></li>
<li><a href="https://commons.apache.org/proper/commons-io/download_io.cgi">commons-io-2.6.jar</a></li>
<li><a href="https://commons.apache.org/proper/commons-logging/download_logging.cgi">commons-logging-1.2.jar</a></li>
<li><a href="https://commons.apache.org/proper/commons-pool/download_pool.cgi">commons-pool2-2.7.0.jar</a></li>
</ul>
<p>参考：</p>
<ul>
<li><a href="https://blog.csdn.net/wiker_yong/article/details/23551209">一篇关于 Apache Commons 类库的详解</a></li>
<li><a href="https://blog.csdn.net/qq_34520606/article/details/78431802">Apache Commons 工具包</a></li>
</ul>
<h4 id="%e5%af%bc%e5%85%a5%e5%85%b6%e5%ae%83%e5%9f%ba%e7%a1%80-jar-%e5%8c%85">导入其它基础 jar 包</h4>
<ul>
<li><a href="https://mvnrepository.com/artifact/org.aspectj/aspectjweaver">aspectjweaver-1.9.4.jar</a></li>
<li><a href="https://mvnrepository.com/artifact/org.aopalliance/com.springsource.org.aopalliance">com.springsource.org.aopalliance-1.0.0.jar</a></li>
<li><a href="https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-annotations">jackson-annotations-2.10.0.jar</a></li>
<li><a href="https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core">jackson-core-2.10.0.jar</a></li>
<li><a href="https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind">jackson-databind-2.10.0.jar</a></li>
</ul>
<p>参考：</p>
<ul>
<li><a href="https://blog.csdn.net/snower08/article/details/83353064">com.springsource.*.xx.jar 和同名 *.xx.jar 有什么区别？</a></li>
</ul>
<h4 id="%e9%85%8d%e7%bd%ae-spring">配置 Spring</h4>
<p>在项目的 <code>Java Resources</code> 项中新建一个名为 <code>resource</code> 的 'source folder'，然后在其下新建两个 XML 文件。</p>
<p>applicationContext.xml：</p>
<pre><code class="language-xml"><div><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans"</span>
       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">"http://www.springframework.org/schema/context"</span>
       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans.xsd
                           http://www.springframework.org/schema/context
                           http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span>
</div></code></pre>
<h4 id="%e9%85%8d%e7%bd%ae-springmvc">配置 SpringMVC</h4>
<p>applicationContext-mvc.xml：</p>
<pre><code class="language-xml"><div><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans"</span>
       <span class="hljs-attr">xmlns:mvc</span>=<span class="hljs-string">"http://www.springframework.org/schema/mvc"</span>
       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">"http://www.springframework.org/schema/context"</span>
       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans.xsd
                           http://www.springframework.org/schema/context
                           http://www.springframework.org/schema/context/spring-context.xsd
                           http://www.springframework.org/schema/mvc
                           http://www.springframework.org/schema/mvc/spring-mvc.xsd"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- mvc 静态资源放行 —— 允许访问图片等静态资源 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">mvc:default-servlet-handler</span>/&gt;</span>
    
    <span class="hljs-comment">&lt;!-- mvc 支持注解 Controller --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">context:annotation-config</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">mvc:annotation-driven</span>/&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 设置扫描包的路径 Controller --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">"com.dims.web.controller"</span>/&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 视图解析器 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- 配置前缀和后缀 --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"prefix"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>/WEB-INF/views/<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"suffix"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>.jsp<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span>
</div></code></pre>
<h3 id="%e9%85%8d%e7%bd%ae-webxml">配置 web.xml</h3>
<p>在项目的 <code>WebContent\WEB-INF\</code> 目录下找到 web.xml 文件，进行配置：</p>
<p>web.xml：</p>
<pre><code class="language-xml"><div><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">web-app</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://xmlns.jcp.org/xml/ns/javaee"</span>
         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://xmlns.jcp.org/xml/ns/javaee
                             http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"</span>
         <span class="hljs-attr">id</span>=<span class="hljs-string">"WebApp_ID"</span> <span class="hljs-attr">version</span>=<span class="hljs-string">"4.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">display-name</span>&gt;</span>DIMS<span class="hljs-tag">&lt;/<span class="hljs-name">display-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">welcome-file-list</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">welcome-file</span>&gt;</span>index.jsp<span class="hljs-tag">&lt;/<span class="hljs-name">welcome-file</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">welcome-file-list</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 解决乱码问题 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>encoding<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>utf-8<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 加载 spring 配置文件 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">context-param</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>contextConfigLocation<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">context-param</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 启动的时候加载 spring 的配置文件 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">listener</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="hljs-tag">&lt;/<span class="hljs-name">listener-class</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">listener</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 启动的时候加载 springmvc 的配置文件 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>springmvc<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>contextConfigLocation<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>classpath:applicationContext-mvc.xml<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">load-on-startup</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">load-on-startup</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>springmvc<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">web-app</span>&gt;</span>
</div></code></pre>
<h3 id="%e9%9b%86%e6%88%90-spring-%e5%92%8c-mybatis">集成 Spring 和 MyBatis</h3>
<h4 id="%e5%af%bc%e5%85%a5-mybatis-%e7%9a%84-jar-%e5%8c%85">导入 MyBatis 的 jar 包</h4>
<ul>
<li>
<p><a href="https://blog.mybatis.org/">MyBatis 官网</a></p>
</li>
<li>
<p><a href="https://mybatis.org/mybatis-3/zh/index.html">MyBatis v3 官网</a></p>
</li>
<li>
<p><a href="https://github.com/mybatis/mybatis-3/">MyBatis v3 GitHub 项目</a></p>
</li>
<li>
<p><a href="http://mybatis.org/spring/zh/index.html">MyBatis-Spring 官网</a></p>
</li>
<li>
<p><a href="https://github.com/mybatis/mybatis-3/releases">MyBatis v3 GitHub 项目 jar 包下载页面</a></p>
</li>
<li>
<p><a href="https://mvnrepository.com/artifact/org.mybatis/mybatis-spring/2.0.3">MyBatis-Spring jar 包下载页面</a></p>
</li>
</ul>
<p>需要导入的 jar 包：</p>
<ul>
<li>asm-7.0.jar</li>
<li>cglib-3.2.10.jar</li>
<li>javassist-3.24.1-GA.jar</li>
<li>log4j-1.2.17.jar</li>
<li>mybatis-3.5.3.jar</li>
<li>mybatis-spring-2.0.3.jar</li>
<li>slf4j-api-1.7.26.jar</li>
<li>slf4j-log4j12-1.7.26.jar</li>
</ul>
<p>除此之外还需要导入 SQL Server 的 JDBC Driver jar 包：</p>
<ul>
<li><a href="https://docs.microsoft.com/en-us/sql/connect/jdbc/download-microsoft-jdbc-driver-for-sql-server?view=sql-server-ver15">mssql-jdbc-7.4.1.jre8.jar</a></li>
</ul>
<h4 id="%e9%85%8d%e7%bd%ae-mybatis">配置 MyBatis</h4>
<p>在 <code>resource</code> 目录下，新建一个名为 <code>jdbc.properties</code> 的文件：</p>
<p>jdbc.properties：</p>
<pre><code><code><div>jdbc.driverClassName=com.microsoft.sqlserver.jdbc.SQLServerDriver
jdbc.url=jdbc:sqlserver://localhost:1433;databaseName=DIMS
jdbc.username=dba
jdbc.password=abcd1234@
</div></code></code></pre>
<p>在 Spring 的配置文件当中，配置 MyBatis：</p>
<p>applicationContext.xml：</p>
<pre><code class="language-xml"><div><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans"</span>
       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">"http://www.springframework.org/schema/context"</span>
       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans.xsd
                           http://www.springframework.org/schema/context
                           http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- jdbc.properties → dataSource → sqlSessionFactory → mapper → service → action --&gt;</span>
    
    <span class="hljs-comment">&lt;!-- jdbc.properties 加载 JDBC 配置文件 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">context:property-placeholder</span> <span class="hljs-attr">location</span>=<span class="hljs-string">"classpath:jdbc.properties"</span> /&gt;</span>
    
    <span class="hljs-comment">&lt;!-- dataSource 配置数据源 (连接池) --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"dataSource"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"org.apache.commons.dbcp2.BasicDataSource"</span> <span class="hljs-attr">destroy-method</span>=<span class="hljs-string">"close"</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- 依赖注入连接池需要的属性 --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"driverClassName"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"${jdbc.driverClassName}"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"url"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"${jdbc.url}"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"${jdbc.username}"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"${jdbc.password}"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- sqlSessionFactory --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"sqlSessionFactory"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- 引入数据源 --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"dataSource"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"dataSource"</span> /&gt;</span>
        <span class="hljs-comment">&lt;!-- 加载所有的 mapper 路径 --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"mapperLocations"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"classpath:com/dims/mapper/*Mapper.xml"</span> /&gt;</span>
        <span class="hljs-comment">&lt;!-- 配置别名 --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"typeAliasesPackage"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"com.dims.domain"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 扫描 mapper 层 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- 扫描 mapper 接口的包路径 --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"basePackage"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"com.dims.mapper"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 扫描 service 层 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">"com.dims.service"</span> /&gt;</span>
    
    <span class="hljs-comment">&lt;!-- action --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span>
</div></code></pre>
<h3 id="%e9%85%8d%e7%bd%ae-log4j">配置 log4j</h3>
<p>在 <code>resource</code> 目录下，新建一个名为 <code>log4j.properties</code> 的文件：</p>
<p>log4j.properties：</p>
<pre><code><code><div>log4j.rootLogger=ERROR, stdout

log4j.logger.com.sms=TRACE

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d %p [%c] - %m%n
</div></code></code></pre>
<h3 id="%e9%9b%86%e6%88%90%e5%9f%ba%e4%ba%8e-bootstrap-%e5%89%8d%e7%ab%af%e6%a1%86%e6%9e%b6%e7%9a%84-ace-%e7%ae%a1%e7%90%86%e7%b3%bb%e7%bb%9f%e9%a1%b5%e9%9d%a2%e6%a8%a1%e6%9d%bf">集成基于 Bootstrap 前端框架的 ACE 管理系统页面模板</h3>
<ul>
<li><a href="http://ace.jeka.by/">ACE 管理系统页面模板预览</a></li>
<li><a href="https://github.com/bopoda/ace">ACE GitHub 项目</a></li>
<li><a href="https://github.com/XinLiangCoder/AceAdmin">ACE GitHub 项目 (中文版)</a></li>
</ul>
<p>从 ACE 的 GitHub 项目页面下载该项目的压缩包，解压后将解压路径下的 <code>assets</code> 文件夹复制到项目的 <code>WebContent</code> 目录下。</p>
<h3 id="%e5%af%bc%e5%85%a5-apache-taglibs-%e7%9a%84-jar-%e5%8c%85">导入 Apache Taglibs 的 jar 包</h3>
<ul>
<li><a href="http://tomcat.apache.org/download-taglibs.cgi">Apache Taglibs 官网下载页面</a></li>
</ul>
<p>需要导入的 jar 包：</p>
<ul>
<li>taglibs-standard-impl-1.2.5.jar</li>
<li>taglibs-standard-spec-1.2.5.jar</li>
</ul>
<h2 id="%e6%b5%8b%e8%af%95%e4%b8%8e%e9%aa%8c%e6%94%b6">测试与验收</h2>
<h3 id="%e7%95%8c%e9%9d%a2%e6%b5%8b%e8%af%95">界面测试</h3>
<p>界面测试：反复不间断地点击各窗体连接，测试其连接情况是否达到预期效果。</p>
<p>发现的问题：</p>
<ol>
<li>
<p>360 安全浏览器使用兼容模式时，部分链接无法正确处理。(极速模式可行)</p>
<p>客户端页面报错：</p>
<pre><code><code><div>HTTP Status 400 - 错误的请求
Type：异常报告
消息：Invalid character found in the request target. The valid characters are defined in RFC 7230 and RFC 3986
描述：由于被认为是客户端对错误 (例如：畸形的请求语法、无效的请求信息帧或者虚拟的请求路由)，服务器无法或不会处理当前请求。
Exception：
java.lang.IllegalArgumentException: Invalid character found in the request target. The valid characters are defined in RFC 7230 and RFC 3986
    at org.apache.coyote.http11.Http11InputBuffer.parseRequestLine(Http11InputBuffer.java:468)
    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:292)
    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1579)
    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
    at java.lang.Thread.run(Thread.java:748)
</div></code></code></pre>
<p>服务器端 Tomcat 报错：</p>
<pre><code><code><div>十二月 22, 2019 3:28:49 下午 org.apache.coyote.http11.Http11Processor service
信息: 解析 HTTP 请求 header 错误
Note: further occurrences of HTTP request parsing errors will be logged at DEBUG level.
java.lang.IllegalArgumentException: Invalid character found in the request target. The valid characters are defined in RFC 7230 and RFC 3986
    at org.apache.coyote.http11.Http11InputBuffer.parseRequestLine(Http11InputBuffer.java:468)
    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:292)
    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)
    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1579)
    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
    at java.lang.Thread.run(Thread.java:748)
</div></code></code></pre>
<p>解决方法：应该是编码的问题，🙃 累了，不想理会 360 这朵奇葩 🙃。</p>
</li>
</ol>
<h3 id="%e5%8a%9f%e8%83%bd%e6%b5%8b%e8%af%95">功能测试</h3>
<p>功能测试：对系统各功能模块逐一测试，尽最大可能地发现潜在 BUG 错误。</p>
<p>发现的问题：</p>
<ol>
<li>
<p>没有对处方表单当中的病人身份证号码输入栏作输入限制，该输入栏可以输入中文字符和特殊符号。</p>
<p>解决方法：在病人身份证号码的输入标签当中限制文本输入类型 (没有完全解决，仍然可以输入下划线 <code>_</code>)：</p>
<pre><code class="language-html"><div><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">...</span> <span class="hljs-attr">onKeyUp</span>=<span class="hljs-string">"value=value.replace(/[\W]/g,'')"</span> /&gt;</span>
</div></code></pre>
</li>
<li>
<p>在新增药品入库表单当中，药品数量输入栏的最小值输入限制设置为 0，而数量为 0 的药品批次没有意义。</p>
<p>解决方法：对于新增药品入库表单，限制药品数量输入标签的输入最小值为 1；对于修改药品入库表单，限制药品数量输入标签的输入最小值为 0。</p>
<pre><code class="language-javascript"><div>$(<span class="hljs-string">'#spinner1'</span>).ace_spinner({<span class="hljs-attr">value</span>:${type ? <span class="hljs-string">'1'</span> : <span class="hljs-string">'0'</span>}, <span class="hljs-attr">min</span>:${type ? <span class="hljs-string">'1'</span> : <span class="hljs-string">'0'</span>}, <span class="hljs-attr">max</span>:<span class="hljs-number">10000</span>, <span class="hljs-attr">step</span>:<span class="hljs-number">100</span>, <span class="hljs-attr">btn_up_class</span>:<span class="hljs-string">'btn-info'</span>, <span class="hljs-attr">btn_down_class</span>:<span class="hljs-string">'btn-info'</span>})
.closest(<span class="hljs-string">'.ace-spinner'</span>)
.on(<span class="hljs-string">'changed.fu.spinbox'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-comment">//console.log($('#spinner1').val())</span>
});
</div></code></pre>
</li>
</ol>
<h3 id="%e6%80%a7%e8%83%bd%e6%b5%8b%e8%af%95">性能测试</h3>
<p>性能测试：将程序以局域网的形式连接数据库，查看数据连接是否满足多用户的要求。</p>
<h3 id="%e9%9c%80%e6%b1%82%e6%b5%8b%e8%af%95">需求测试</h3>
<p>需求测试：根据需求分析的内容，给使用者进行试用，测试软件是否和当初设计的一样能满足各用户需求。</p>
<p>发现的问题：</p>
<ol>
<li>
<p>医生和发药处护士的若干需要查询处方列表的页面没有对查询结果进行初始化的排序。</p>
<p>解决方法：</p>
<p>原查询代码：</p>
<pre><code class="language-sql"><div><span class="hljs-keyword">SELECT</span> *
<span class="hljs-keyword">FROM</span> Prescription
<span class="hljs-keyword">WHERE</span> Dno = <span class="hljs-comment">#{Dno};</span>
</div></code></pre>
<p>修改后的查询代码：</p>
<pre><code class="language-sql"><div><span class="hljs-keyword">SELECT</span> *
<span class="hljs-keyword">FROM</span> Prescription
<span class="hljs-keyword">WHERE</span> Dno = <span class="hljs-comment">#{Dno}</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> Ptime <span class="hljs-keyword">DESC</span>;
</div></code></pre>
</li>
</ol>
<h2 id="%e9%81%87%e5%88%b0%e7%9a%84%e9%97%ae%e9%a2%98">遇到的问题</h2>
<ol>
<li>
<p><code>javax.el.PropertyNotFoundException: 类型[com.dims.domain.InventoryDrug]上找不到属性[Sno]</code>：</p>
<p>参考：</p>
<ul>
<li><a href="https://blog.csdn.net/gr_guhun/article/details/89953842">javax.el.PropertyNotFoundException——属性未找到</a></li>
</ul>
</li>
<li>
<p>关于 jsp 页面当中 Date / DateTime 类型的值的显示格式问题：</p>
<p>参考：</p>
<ul>
<li><a href="https://blog.csdn.net/xiaolizi22233/article/details/54237183">jsp 中的日期显示问题</a></li>
<li><a href="https://www.cnblogs.com/jxldjsn/p/6936924.html">jstl 标签的 fmt:formatDate 格式化日期 String to Date</a></li>
</ul>
</li>
<li>
<p>关于 jsp 页面当中实型值的显示格式问题：</p>
<p>参考：</p>
<ul>
<li><a href="https://blog.csdn.net/guorun18/article/details/49616985">jsp 页面的数显示两位小数</a></li>
</ul>
</li>
<li>
<p>关于 <code>Model Attribute</code> 和 <code>Session Attribute</code> 的作用域问题：</p>
<p>参考：</p>
<ul>
<li><a href=""></a></li>
</ul>
</li>
<li>
<p>SpringMVC 当中 Controller 层能不能有重载方法？</p>
<p>参考：</p>
<ul>
<li><a href="https://blog.csdn.net/qq_38366063/article/details/93030217">SpringMVC 里面 Controller 能不能重载方法</a></li>
</ul>
</li>
<li>
<p>怎么把 Markdown 文件转化为 HTML 格式？</p>
<p>参考：</p>
<ul>
<li><a href="https://github.com/yzhang-gh/vscode-markdown">Visual Studio Code 插件 Markdown All in One</a></li>
</ul>
</li>
<li>
<p>怎么把聚合函数 <code>SUM</code> 的 <code>NULL</code> 聚合结果值改为 <code>0</code>？</p>
<p>参考：</p>
<ul>
<li><a href="https://blog.csdn.net/weixin_30740295/article/details/97448163">SQL Server 聚合函数 SUM 计算出来为空，怎样返回 0</a></li>
</ul>
</li>
<li>
<p>MyBatis Mapper 层的 XML 映射文件报错 <code>The content of elements must consist of well-formed character data or markup.</code>：</p>
<p>参考：</p>
<ul>
<li><a href="https://www.cnblogs.com/wangjinyu/p/10100550.html">MyBatis 报 The content of elements must consist of well-formed character data or markup. 语法格式错误</a></li>
<li><a href="https://blog.csdn.net/qq_37856300/article/details/85296159">MyBatis 异常：The content of elements must consist of well-formed character data or markup. 的解决方法</a></li>
</ul>
</li>
<li>
<p>怎么把 SQL Server <code>GETDATE()</code> 函数返回的 <code>DATETIME</code> 类型的值转换为 <code>DATE</code> 类型的值？</p>
<p>参考：</p>
<ul>
<li><a href="https://www.w3school.com.cn/sql/func_getdate.asp">SQL Server GETDATE() 函数</a></li>
<li><a href="https://www.cnblogs.com/Scholars/p/8919094.html">SQL Server 获取当前日期</a></li>
<li><a href="https://blog.csdn.net/diligentcatrich/article/details/6274126">SQL Server 中将 DATETIME 类型转换为 DATE，或者 TIME</a></li>
<li><a href="https://www.cnblogs.com/fubeidong/archive/2007/07/06/526247.html">SQL Server DATETIME 数据类型的格式转换</a></li>
</ul>
</li>
<li>
<p>在 SQL Server 当中怎么计算时间差？</p>
<p>参考：</p>
<ul>
<li><a href="https://www.w3school.com.cn/sql/func_datediff.asp">SQL Server DATEDIFF() 函数</a></li>
</ul>
</li>
<li>
<p>怎样进行内网穿透，让外网能访问本地的应用？</p>
<p>参考：</p>
<ul>
<li><a href="https://hsk.oray.com/">花生壳官网</a></li>
<li><a href="https://blog.csdn.net/zhangguo5/article/details/77848658">一分钟实现内网穿透 (ngrok 服务器搭建)</a></li>
<li><a href="https://www.jianshu.com/p/d0b3991a9ce1">内网穿透神器——Serveo</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/30351943">内网穿透工具的原理与开发实战</a></li>
</ul>
</li>
<li>
<p>Java 如何对枚举类型的变量进行赋值？</p>
<p>参考：</p>
<ul>
<li><a href="https://www.cnblogs.com/Jesuslovesme/p/8982595.html">Java 枚举类型的使用</a></li>
</ul>
</li>
<li>
<p>Java 如何对 Date 类型的变量进行赋值？</p>
<p>参考：</p>
<ul>
<li><a href="https://blog.csdn.net/qq_42928918/article/details/89324295">Java 实现日期 Date 的赋值</a></li>
</ul>
</li>
<li>
<p>URL 中参数带空格应该如何表示？</p>
<p>参考：</p>
<ul>
<li><a href="https://www.cnblogs.com/jphoebe/p/6437185.html">URL 参数中有 +、空格、=、%、&amp;、# 等特殊符号的问题解决</a></li>
</ul>
</li>
<li>
<p>关于 Java 的重写 (Override) 与重载 (Overload):</p>
<p>参考：</p>
<ul>
<li><a href="https://www.runoob.com/java/java-override-overload.html">Java 重写 (Override) 与重载 (Overload)</a></li>
</ul>
</li>
<li>
<p>MyBatis 的 Mapper 层接口方法可以重载吗？</p>
<p>不能 😭。</p>
<p>参考：</p>
<ul>
<li><a href="https://www.cnblogs.com/wgyi140724-/p/10736575.html">MyBatis 中的 dao 层接口是否可以重载？</a></li>
<li><a href="https://blog.csdn.net/unix21/article/details/52239514">MyBatis 注解方法不能重载</a></li>
</ul>
<p>有空再看：</p>
<ul>
<li><a href="https://blog.csdn.net/qq_28898917/article/details/103567919">MyBatis 接口重载：使用 JDK 1.8 default 关键字解决 MyBatis 方法不支持重载问题</a></li>
</ul>
</li>
<li>
<p>MyBatis 如何调用存储过程？</p>
<p>参考：</p>
<ul>
<li><a href="https://www.cnblogs.com/wojiaochuichui/p/8568208.html">MyBatis 示例之存储过程</a></li>
<li><a href="http://www.luyixian.cn/news_show_5471.aspx">MyBatis 调用存储过程</a></li>
<li><a href="https://www.cnblogs.com/yanan7890/p/8776379.html">MyBatis 调用存储过程获得取返回值</a></li>
</ul>
</li>
<li>
<p>SQL Server 事务的使用是为了确保数据的一致性，但是当操作 (增删改) 发生由 NULL 值引发的错误时，事务会跳过错误继续执行正常的语句，如何让该种事务回滚？</p>
<p>参考：</p>
<ul>
<li><a href="https://www.cnblogs.com/itsone/p/10273317.html">SQL Server 事务的使用 (tran)</a></li>
</ul>
</li>
<li>
<p>MyBatis insert Mapper 如何获取自增主键值？</p>
<p>参考：</p>
<ul>
<li><a href="https://blog.csdn.net/yamadeee/article/details/83997122">Mybatis 获取自增主键值 (Mysql、Oracle)</a></li>
</ul>
</li>
<li>
<p>SQL Server 怎么查询所有登录用户？</p>
<p>参考：</p>
<ul>
<li><a href="https://stackoverflow.com/questions/37275/sql-query-for-logins">SQL Query for Logins</a></li>
</ul>
</li>
<li>
<p>HTML 表单隐藏域怎么实现？</p>
<p>参考：</p>
<ul>
<li><a href="https://blog.csdn.net/qq_36260974/article/details/88370624">HTML 表单隐藏域</a></li>
</ul>
</li>
<li>
<p>SQL Server 游标的使用？</p>
<p>参考：</p>
<ul>
<li><a href="https://blog.csdn.net/duqiang741/article/details/80851827">SQL Server 简单游标使用</a></li>
<li><a href="https://blog.csdn.net/weixin_42026802/article/details/80575689">SQL Server 中的循环遍历 (普通循环和游标循环)</a></li>
</ul>
</li>
<li>
<p>SQL Server 定义游标时的子查询不能使用 ORDER BY 语句？</p>
<p>参考：</p>
<ul>
<li><a href="https://bbs.csdn.net/topics/391931688">游标读取的 SELECT 语句不能用 ORDER BY 排序，怎么办？</a></li>
<li><a href="https://blog.csdn.net/Pagegle/article/details/84587608">SQL Server 里的游标里使用 ORDER BY 语句</a></li>
<li><a href="https://bbs.csdn.net/topics/390958749">SQL Server 里的游标，它的数据集里写的 SELECT 语句可以用 ORDER BY 吗？</a></li>
</ul>
</li>
<li>
<p>HTML 如何限制 input 输入栏的文本输入？</p>
<p>参考：</p>
<ul>
<li><a href="https://www.jianshu.com/p/4e1e7c765512">HTML 限制文本框输入类型</a></li>
</ul>
</li>
</ol>
<h2 id="%e6%88%90%e6%9e%9c%e6%88%aa%e5%9b%be">成果截图</h2>
<p><img src="file:///f:\eclipse-workspace\jee\DIMS\Doc\screenshot_1.png" alt="成果截图_1"></p>
<p><img src="file:///f:\eclipse-workspace\jee\DIMS\Doc\screenshot_2.png" alt="成果截图_2"></p>
<p><img src="file:///f:\eclipse-workspace\jee\DIMS\Doc\screenshot_3.png" alt="成果截图_3"></p>
<p><img src="file:///f:\eclipse-workspace\jee\DIMS\Doc\screenshot_4.png" alt="成果截图_4"></p>
<p><img src="file:///f:\eclipse-workspace\jee\DIMS\Doc\screenshot_5.png" alt="成果截图_5"></p>
<p><img src="file:///f:\eclipse-workspace\jee\DIMS\Doc\screenshot_6.png" alt="成果截图_6"></p>
<p><img src="file:///f:\eclipse-workspace\jee\DIMS\Doc\screenshot_7.png" alt="成果截图_7"></p>

    </body>
    </html>